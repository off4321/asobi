---
doc-id: "system-auth-flow-001"
title: "ユーザー認証フロー概要"
tags: ["認証", "セキュリティ", "フロー"]
versions: "1.0"
---
# ユーザー認証フロー
このドキュメントは、当社のウェブサービスにおける標準的なユーザー認証フローを定義します。

---
## 1. 概要
- **目的**: ユーザーのセキュアな識別とアクセス許可の付与。
- **対象**: フロントエンドアプリケーション、認証サーバー、ユーザーデータベース。

---
## 2. 認証手順
### ✅ ログイン手順
ログインは以下の手順で進行します。

1. ユーザーは**ID**と**パスワード**を入力し、クライアントからリクエストを送信。
2. 認証サーバーは受信した認証情報を検証。
3. 検証成功後、**アクセストークン**と**リフレッシュトークン**を発行。
4. クライアントはトークンを保存し、以降のAPIリクエストに使用。
**トークンはセキュアな方法で保存**

### ✅ トークンの種類と用途
| トークン | 有効期限 | 用途 |
|---|---|---|
| アクセストークン | 短い（例：15分） | APIへのアクセス |
| リフレッシュトークン | 長い（例：7日） | アクセストークンの再発行 |

---
## 3. シーケンス図
以下のMermaid図は、ログイン時の詳細なシーケンスを示します。

```mermaid
sequenceDiagram
    participant U as クライアント
    participant AS as 認証サーバ
    participant DB as ユーザーDB
    U->>AS: ログインリクエスト (ID/Pass)
    AS->>DB: ユーザー情報検索とパスワード検証
    DB-->>AS: 検証結果
    alt 認証成功
        AS->>AS: トークン生成 (Access/Refresh)
        AS-->>U: トークン返却
    else 認証失敗
        AS-->>U: エラーメッセージ
    end
```