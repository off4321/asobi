---
doc-id: "ops-log-monitor-007"
title: "ログレベルと監視のガイドライン"
tags: ["運用", "ログ", "監視", "アラート"]
versions: "1.0"
---
# ログレベルと監視のガイドライン
このドキュメントは、アプリケーションとインフラストラクチャにおけるログの適切な使用法と監視設定の基準を提供します。

---
## 1. 概要
- **目的**: 問題発生時の迅速な特定と、システムの状態をリアルタイムで把握すること。
- **対象**: 開発者、運用エンジニア、SREチーム。

---
## 2. 標準ログレベル
ログレベルは重要度に応じて適切に使い分けます。

| レベル | 重要度 | 用途 |
|---|---|---|
| **ERROR** | 最も高い | アプリケーションが**続行できない**致命的なエラー。アラート対象。 |
| **WARN** | 高い | 予期しない動作、潜在的な問題。**すぐに修正が必要ではない**が注意が必要。 |
| **INFO** | 中 | 正常な処理の一般的な進捗を示す情報。デプロイ、サービス起動など。 |
| **DEBUG** | 低い | 詳細なデバッグ情報。本番環境では通常無効。 |

---
## 3. 監視とアラート
### ✅ 監視項目
- サーバーのリソース使用状況 (CPU、メモリ、ディスクIO)。
- APIの**レイテンシ**と**エラー率** (SLI)。
- データベースのクエリ実行時間。
- アプリケーションの**カスタムメトリクス**（例：認証失敗回数）。

### ✅ アラート基準
- **ERROR**レベルのログが1分間に5回以上記録された場合、アラートを発報。
- **CPU使用率**が5分間連続で90%を超過した場合、アラートを発報。
- **レイテンシ**がSLAで定められた基準を超過した場合、アラートを発報。

---
## 4. 監視システムの構成図
アプリケーションから監視システムへのログとメトリクスの流れです。

```mermaid
graph TD
    A[アプリケーション] --> B(ロギングライブラリ);
    A --> C(メトリクスエミッタ);
    B --> D[ログコレクター/Loki];
    C --> E[メトリクスDB/Prometheus];
    D --> F[アラートエンジン];
    E --> F;
    F --> G[通知 (PagerDuty/Slack)];
```