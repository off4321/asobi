---
doc-id: "ai-embedding-finetuning-025"
title: "埋め込みモデルのファインチューニング戦略"
tags: ["AI", "LLM", "RAG", "埋め込み", "ファインチューニング"]
versions: "1.0"
---
# 埋め込みモデルのファインチューニング戦略
このドキュメントは、RAGシステムの検索精度を向上させるために、既存の埋め込みモデルをカスタムデータで**ファインチューニング**（微調整）する戦略を解説します。

---
## 1. 概要
- **目的**: 汎用的な埋め込みモデルを、**特定のドメインやナレッジベース**の用語、文脈に特化させることで、**意味的な類似性に基づく検索精度を向上**させる。
- **RAGとの関係**: 埋め込みモデルの品質は、リトリーバーが関連性の高いドキュメントを取得できるかどうかに直結する。

---
## 2. 主要なファインチューニング戦略
| 戦略 | 説明 | 必要なデータ |
|---|---|---|
| **コントラスティブ学習** | 類似のペア（Positive Pair）と非類似のペア（Negative Pair）を与え、**類似ペアの距離を近く、非類似ペアの距離を遠ざける**ように学習させる。 | 関連性の高いドキュメントのペア、関連性の低いドキュメントのペア。 |
| **トリプレット学習** | **アンカー、ポジティブ、ネガティブ**の3つのサンプルセットを用いて学習させる。 | 質問、関連する回答（Positive）、関連しない回答（Negative）。 |
| **蒸留** | より大規模で高性能な教師モデルの出力を模倣するように、より小型の生徒モデルを学習させる。 | 教師モデルで生成されたソフトラベル。 |

---
## 3. 評価メトリクス
ファインチューニング後の埋め込みモデルの性能は、通常、情報検索の指標を用いて評価します。

| 指標 | 説明 |
|---|---|
| **Mean Reciprocal Rank (MRR)** | 最初の正解文書がどれだけ**上位にランクイン**したかを評価する。 |
| **Recall@k** | 上位k件の中に、**正解文書がどれだけ含まれている**かを評価する。 |
| **Normalized Discounted Cumulative Gain (NDCG)** | 検索結果の順位を考慮し、**適合性が高いものが上位にある**ほどスコアが高くなる。 |